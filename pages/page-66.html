        <section class="page-section" id="page-66">
            <div class="page-header">
                <div class="page-number">66</div>
                <div class="page-title">
                    <h3>Derivarea PCA cu Trace</h3>
                    <span>Demonstratie Formala</span>
                </div>
            </div>
            <div class="image-container">
                <img src="../book_page_jpg/page-066.jpg"
                     alt="Pagina 66" class="page-image" onclick="zoomImage(this)">
            </div>
            <div class="explanation-content">

                <div class="interactive-paragraph">
                    <div class="paragraph-main" onclick="toggleParagraph(this)">
                        <h4>Folosirea Normei Frobenius si Trace</h4>
                        <p>Pentru a deriva PCA riguros, exprimam eroarea folosind norma Frobenius: ||X - Xddáµ€||Â²_F = Tr(...). Apoi folosim proprietatile trace-ului pentru a simplifica expresia!</p>
                    </div>
                    <div class="expandable-sections">
                        <div class="section-tab">
                            <div class="section-header" onclick="toggleSection(this)">
                                <div class="section-icon animation">âœ¨</div>
                                <span>Pasii derivarii</span>
                                <span class="arrow">â–¶</span>
                            </div>
                            <div class="section-content">
                                <div class="section-body">
                                    <div style="display: grid; gap: 10px; font-size: 0.9rem;">
                                        <div style="background: var(--bg-lighter); padding: 12px; border-radius: 8px;">
                                            <strong>1.</strong> ||X - Xddáµ€||Â²_F = Tr((X - Xddáµ€)áµ€(X - Xddáµ€))
                                        </div>
                                        <div style="background: var(--bg-lighter); padding: 12px; border-radius: 8px;">
                                            <strong>2.</strong> = Tr(Xáµ€X) - 2Tr(Xáµ€Xddáµ€) + Tr(ddáµ€Xáµ€Xddáµ€)
                                        </div>
                                        <div style="background: var(--bg-lighter); padding: 12px; border-radius: 8px;">
                                            <strong>3.</strong> Folosind dáµ€d = 1 si proprietatea ciclica a trace...
                                        </div>
                                        <div style="background: var(--bg-lighter); padding: 12px; border-radius: 8px;">
                                            <strong>4.</strong> = Tr(Xáµ€X) - Tr(Xáµ€Xddáµ€)
                                        </div>
                                        <div style="background: var(--success); padding: 12px; border-radius: 8px; color: white;">
                                            <strong>5.</strong> Minimizare eroare âŸº Maximizare Tr(dáµ€Xáµ€Xd)
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="section-tab">
                            <div class="section-header" onclick="toggleSection(this)">
                                <div class="section-icon reference">ðŸ“š</div>
                                <span>Trickuri cu Trace folosite</span>
                                <span class="arrow">â–¶</span>
                            </div>
                            <div class="section-content">
                                <div class="section-body">
                                    <div class="key-concept">
                                        <h5>ðŸ”‘ Proprietati exploatate</h5>
                                        <ul style="margin-left: 20px; margin-top: 10px; color: var(--text-secondary);">
                                            <li>||A||Â²_F = Tr(Aáµ€A) = Tr(AAáµ€)</li>
                                            <li>Tr(ABC) = Tr(CAB) (proprietatea ciclica)</li>
                                            <li>Tr(AB) = Tr(BA) chiar daca dimensiunile difera</li>
                                            <li>dáµ€Xáµ€Xd este scalar = Tr(dáµ€Xáµ€Xd)</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="interactive-paragraph">
                    <div class="paragraph-main" onclick="toggleParagraph(this)">
                        <h4>Problema de Maximizare cu Constrangere</h4>
                        <p>Am ajuns la: max_d dáµ€Xáµ€Xd cu constrangerea dáµ€d = 1. Aceasta e o problema clasica de <strong>optimizare cu constrangeri</strong> - se rezolva cu multiplicatori Lagrange sau recunoscand-o ca problema de eigenvalue.</p>
                    </div>
                    <div class="expandable-sections">
                        <div class="section-tab">
                            <div class="section-header" onclick="toggleSection(this)">
                                <div class="section-icon simulation">ðŸŽ®</div>
                                <span>Solutia via eigendecomposition</span>
                                <span class="arrow">â–¶</span>
                            </div>
                            <div class="section-content">
                                <div class="section-body">
                                    <p style="color: var(--text-secondary); margin-bottom: 15px;">
                                        Maximul lui dáµ€Ad cu ||d|| = 1 este atins cand d e eigenvectorul lui A cu cea mai mare eigenvalue!
                                    </p>
                                    <div class="formula">
                                        d* = eigenvector(Xáµ€X) cu Î»_max
                                    </div>
                                    <div class="code-block" style="margin-top: 15px;">
                                        <code>
# In practica, folosim SVD (mai stabil)<br>
U, S, Vt = np.linalg.svd(X, full_matrices=False)<br><br>
# Primele l coloane ale V sunt componentele principale<br>
D = Vt[:l].T  # sau Vt.T[:, :l]<br><br>
# Eigenvalues ale Xáµ€X = SÂ² (singular values la patrat)<br>
explained_variance = S[:l]**2 / sum(S**2)
                                        </code>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>
