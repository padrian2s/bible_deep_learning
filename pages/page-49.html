        <section class="page-section" id="page-49">
            <div class="page-header">
                <div class="page-number">49</div>
                <div class="page-title">
                    <h3>Broadcasting si Inmultirea Matricilor</h3>
                    <span>Sectiunea 2.2</span>
                </div>
            </div>
            <div class="image-container">
                <img src="../book_page_jpg/page-049.jpg"
                     alt="Pagina 49" class="page-image" onclick="zoomImage(this)">
            </div>
            <div class="explanation-content">

                <div class="interactive-paragraph">
                    <div class="paragraph-main" onclick="toggleParagraph(this)">
                        <h4>Broadcasting - Magia Dimensiunilor</h4>
                        <p><strong>Broadcasting</strong> permite operatii intre matrici si vectori de dimensiuni diferite. Cand adaugi un vector la o matrice, vectorul se "copiaza" implicit pe fiecare rand. Fara el, ai avea nevoie de bucle explicite!</p>
                    </div>
                    <div class="expandable-sections">
                        <div class="section-tab">
                            <div class="section-header" onclick="toggleSection(this)">
                                <div class="section-icon animation">‚ú®</div>
                                <span>Vizualizare Broadcasting</span>
                                <span class="arrow">‚ñ∂</span>
                            </div>
                            <div class="section-content">
                                <div class="section-body">
                                    <div class="formula">
                                        C = A + b unde C·µ¢,‚±º = A·µ¢,‚±º + b‚±º
                                    </div>
                                    <div style="display: flex; justify-content: center; align-items: center; gap: 15px; margin: 20px 0; flex-wrap: wrap;">
                                        <div style="text-align: center;">
                                            <p style="font-size: 0.8rem; color: var(--text-secondary);">Matrice A (3√ó3)</p>
                                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 3px; padding: 10px; background: var(--bg-lighter); border-radius: 8px;">
                                                <div style="background: var(--primary); padding: 8px; border-radius: 4px;">1</div>
                                                <div style="background: var(--primary); padding: 8px; border-radius: 4px;">2</div>
                                                <div style="background: var(--primary); padding: 8px; border-radius: 4px;">3</div>
                                                <div style="background: var(--primary); padding: 8px; border-radius: 4px;">4</div>
                                                <div style="background: var(--primary); padding: 8px; border-radius: 4px;">5</div>
                                                <div style="background: var(--primary); padding: 8px; border-radius: 4px;">6</div>
                                                <div style="background: var(--primary); padding: 8px; border-radius: 4px;">7</div>
                                                <div style="background: var(--primary); padding: 8px; border-radius: 4px;">8</div>
                                                <div style="background: var(--primary); padding: 8px; border-radius: 4px;">9</div>
                                            </div>
                                        </div>
                                        <div style="font-size: 1.5rem;">+</div>
                                        <div style="text-align: center;">
                                            <p style="font-size: 0.8rem; color: var(--text-secondary);">Vector b (1√ó3)</p>
                                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 3px; padding: 10px; background: var(--bg-lighter); border-radius: 8px;">
                                                <div style="background: var(--success); padding: 8px; border-radius: 4px;">10</div>
                                                <div style="background: var(--success); padding: 8px; border-radius: 4px;">20</div>
                                                <div style="background: var(--success); padding: 8px; border-radius: 4px;">30</div>
                                            </div>
                                        </div>
                                        <div style="font-size: 1.5rem;">=</div>
                                        <div style="text-align: center;">
                                            <p style="font-size: 0.8rem; color: var(--text-secondary);">Rezultat C (3√ó3)</p>
                                            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 3px; padding: 10px; background: var(--bg-lighter); border-radius: 8px;">
                                                <div style="background: var(--warning); padding: 8px; border-radius: 4px;">11</div>
                                                <div style="background: var(--warning); padding: 8px; border-radius: 4px;">22</div>
                                                <div style="background: var(--warning); padding: 8px; border-radius: 4px;">33</div>
                                                <div style="background: var(--warning); padding: 8px; border-radius: 4px;">14</div>
                                                <div style="background: var(--warning); padding: 8px; border-radius: 4px;">25</div>
                                                <div style="background: var(--warning); padding: 8px; border-radius: 4px;">36</div>
                                                <div style="background: var(--warning); padding: 8px; border-radius: 4px;">17</div>
                                                <div style="background: var(--warning); padding: 8px; border-radius: 4px;">28</div>
                                                <div style="background: var(--warning); padding: 8px; border-radius: 4px;">39</div>
                                            </div>
                                        </div>
                                    </div>
                                    <p style="color: var(--text-secondary); font-size: 0.85rem; text-align: center;">
                                        Vectorul <span style="color: var(--success);">b</span> se adauga la FIECARE rand din A automat!
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="section-tab">
                            <div class="section-header" onclick="toggleSection(this)">
                                <div class="section-icon simulation">üéÆ</div>
                                <span>Aplicatie: Bias in Neural Networks</span>
                                <span class="arrow">‚ñ∂</span>
                            </div>
                            <div class="section-content">
                                <div class="section-body">
                                    <p style="color: var(--text-secondary); margin-bottom: 15px;">Broadcasting e folosit pentru a adauga bias-ul la output-ul unui layer:</p>
                                    <div class="code-block">
                                        <code>
# Fara broadcasting (lent, ineficient):<br>
for i in range(batch_size):<br>
&nbsp;&nbsp;&nbsp;&nbsp;output[i] = W @ input[i] + b<br><br>
# Cu broadcasting (rapid, optimizat GPU):<br>
output = W @ input + b  # b se broadcast automat!<br><br>
# Exemplu concret:<br>
# input: (32, 784) - 32 imagini flatten<br>
# W: (784, 128) - weights<br>
# b: (128,) - bias vector<br>
# output: (32, 128) - b adaugat la toate cele 32
                                        </code>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="interactive-paragraph">
                    <div class="paragraph-main" onclick="toggleParagraph(this)">
                        <h4>2.2 Inmultirea Matricilor si Vectorilor</h4>
                        <p><strong>Produsul matricial</strong> C = AB cere ca numarul de coloane din A sa fie egal cu numarul de randuri din B. Este operatia fundamentala in Deep Learning - fiecare layer face o inmultire matriciala!</p>
                    </div>
                    <div class="expandable-sections">
                        <div class="section-tab">
                            <div class="section-header" onclick="toggleSection(this)">
                                <div class="section-icon animation">‚ú®</div>
                                <span>Cum functioneaza inmultirea</span>
                                <span class="arrow">‚ñ∂</span>
                            </div>
                            <div class="section-content">
                                <div class="section-body">
                                    <div class="formula">
                                        C·µ¢,‚±º = Œ£‚Çñ A·µ¢,‚Çñ ¬∑ B‚Çñ,‚±º
                                    </div>
                                    <div class="key-concept">
                                        <h5>üìê Regula dimensiunilor</h5>
                                        <p style="margin-top: 10px; color: var(--text-secondary);">
                                            A(m√ó<span style="color: var(--warning);">n</span>) √ó B(<span style="color: var(--warning);">n</span>√óp) = C(m√óp)
                                        </p>
                                        <p style="margin-top: 5px; font-size: 0.85rem; color: var(--text-secondary);">
                                            Dimensiunile interioare (<span style="color: var(--warning);">n</span>) trebuie sa fie egale si "dispar" in rezultat.
                                        </p>
                                    </div>
                                    <div style="background: var(--bg-lighter); padding: 15px; border-radius: 8px; margin-top: 15px;">
                                        <p style="color: var(--accent); font-weight: bold;">Intuitie:</p>
                                        <p style="color: var(--text-secondary); font-size: 0.9rem;">
                                            Elementul C[i,j] = produs scalar intre randul i din A si coloana j din B
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="section-tab">
                            <div class="section-header" onclick="toggleSection(this)">
                                <div class="section-icon reference">üìö</div>
                                <span>Produs Hadamard vs Matricial</span>
                                <span class="arrow">‚ñ∂</span>
                            </div>
                            <div class="section-content">
                                <div class="section-body">
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                                        <div style="background: var(--bg-lighter); padding: 15px; border-radius: 8px;">
                                            <h5 style="color: var(--primary);">Produs Matricial (AB)</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 10px;">
                                                ‚Ä¢ Randuri √ó Coloane<br>
                                                ‚Ä¢ Schimba dimensiunile<br>
                                                ‚Ä¢ Folosit in layers<br>
                                                ‚Ä¢ NumPy: A @ B
                                            </p>
                                        </div>
                                        <div style="background: var(--bg-lighter); padding: 15px; border-radius: 8px;">
                                            <h5 style="color: var(--secondary);">Produs Hadamard (A ‚äô B)</h5>
                                            <p style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 10px;">
                                                ‚Ä¢ Element cu element<br>
                                                ‚Ä¢ Pastreaza dimensiunile<br>
                                                ‚Ä¢ Folosit in attention, gates<br>
                                                ‚Ä¢ NumPy: A * B
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="interactive-paragraph">
                    <div class="paragraph-main" onclick="toggleParagraph(this)">
                        <h4>Produsul Scalar (Dot Product)</h4>
                        <p><strong>Produsul scalar</strong> intre doi vectori x·µÄy da un singur numar (scalar). Masoara cat de "similari" sau "aliniati" sunt vectorii. E baza pentru attention mechanism in transformers!</p>
                    </div>
                    <div class="expandable-sections">
                        <div class="section-tab">
                            <div class="section-header" onclick="toggleSection(this)">
                                <div class="section-icon simulation">üéÆ</div>
                                <span>Aplicatie: Similaritate cosinus</span>
                                <span class="arrow">‚ñ∂</span>
                            </div>
                            <div class="section-content">
                                <div class="section-body">
                                    <div class="formula">
                                        x·µÄy = Œ£·µ¢ x·µ¢ ¬∑ y·µ¢ = ||x|| ¬∑ ||y|| ¬∑ cos(Œ∏)
                                    </div>
                                    <div class="code-block">
                                        <code>
import numpy as np<br><br>
# Similaritate intre word embeddings<br>
king = np.array([0.2, 0.8, -0.1])<br>
queen = np.array([0.3, 0.7, -0.2])<br>
apple = np.array([-0.5, 0.1, 0.9])<br><br>
# Dot product - similaritate<br>
print(king @ queen)  # 0.68 (similari!)<br>
print(king @ apple)  # 0.01 (diferiti!)
                                        </code>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>
