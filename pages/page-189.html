<section class="page-section" id="page-189">
    <div class="page-header">
        <div class="page-number">189</div>
        <div class="page-title">
            <h3>Capitolul 6: Deep Feedforward Networks</h3>
            <span>6.1 XOR: Arhitectura si Formula Completa</span>
        </div>
    </div>
    <div class="image-container">
        <img src="book_page_jpg/page-189.jpg"
             alt="Pagina 189" class="page-image" onclick="zoomImage(this)">
    </div>
    <div class="explanation-content">

        <div class="interactive-paragraph">
            <div class="paragraph-main" onclick="toggleParagraph(this)">
                <h4>Figura 6.2: Doua Stiluri de Desenare a Retelelor</h4>
                <p>Aceasta figura arata reteaua feedforward pentru XOR in doua stiluri. Stilul din stanga deseneaza fiecare unitate ca un nod in graf - explicit dar consuma spatiu pentru retele mari. Stilul din dreapta deseneaza un nod pentru fiecare vector de activari al stratului, cu muchiile etichetate cu parametrii (W pentru x‚Üíh, w pentru h‚Üíy).</p>
            </div>
            <div class="expandable-sections">
                <div class="section-tab">
                    <div class="section-header" onclick="toggleSection(this)">
                        <div class="section-icon animation">‚ú®</div>
                        <span>Vizualizare: Arhitectura XOR</span>
                        <span class="arrow">‚ñ∂</span>
                    </div>
                    <div class="section-content">
                        <div class="section-body">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
                                <div style="background: var(--bg-lighter); padding: 20px; border-radius: 12px; text-align: center;">
                                    <h5 style="color: var(--primary); margin-bottom: 15px;">Stil Explicit (per neuron)</h5>
                                    <div style="display: flex; flex-direction: column; gap: 20px; align-items: center;">
                                        <div style="background: var(--success); padding: 10px 20px; border-radius: 20px;">y</div>
                                        <div style="display: flex; gap: 30px;">
                                            <div style="background: var(--accent); padding: 10px 15px; border-radius: 20px;">h‚ÇÅ</div>
                                            <div style="background: var(--accent); padding: 10px 15px; border-radius: 20px;">h‚ÇÇ</div>
                                        </div>
                                        <div style="display: flex; gap: 30px;">
                                            <div style="background: var(--primary); padding: 10px 15px; border-radius: 20px;">x‚ÇÅ</div>
                                            <div style="background: var(--primary); padding: 10px 15px; border-radius: 20px;">x‚ÇÇ</div>
                                        </div>
                                    </div>
                                </div>
                                <div style="background: var(--bg-lighter); padding: 20px; border-radius: 12px; text-align: center;">
                                    <h5 style="color: var(--accent); margin-bottom: 15px;">Stil Compact (per strat)</h5>
                                    <div style="display: flex; flex-direction: column; gap: 15px; align-items: center;">
                                        <div style="background: var(--success); padding: 10px 20px; border-radius: 20px;">y</div>
                                        <div style="color: var(--text-secondary); font-size: 0.9rem;">‚Üë w</div>
                                        <div style="background: var(--accent); padding: 10px 20px; border-radius: 20px;">h</div>
                                        <div style="color: var(--text-secondary); font-size: 0.9rem;">‚Üë W</div>
                                        <div style="background: var(--primary); padding: 10px 20px; border-radius: 20px;">x</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="interactive-paragraph">
            <div class="paragraph-main" onclick="toggleParagraph(this)">
                <h4>Formula Completa a Retelei</h4>
                <p>Reteaua completa poate fi specificata ca: f(x; W, c, w, b) = w·µÄmax{0, W·µÄx + c} + b. Functia de activare g(z) = max{0, z} este ReLU (Rectified Linear Unit), recomandata implicit pentru majoritatea retelelor feedforward moderne. Este aplicata element-wise, transformand fiecare valoare negativa in 0.</p>
            </div>
            <div class="expandable-sections">
                <div class="section-tab">
                    <div class="section-header" onclick="toggleSection(this)">
                        <div class="section-icon simulation">üéÆ</div>
                        <span>Implementare Completa PyTorch</span>
                        <span class="arrow">‚ñ∂</span>
                    </div>
                    <div class="section-content">
                        <div class="section-body">
                            <div class="code-block">
import torch
import torch.nn as nn

# Formula: f(x; W, c, w, b) = w^T max{0, W^T x + c} + b

class XORNet(nn.Module):
    def __init__(self):
        super().__init__()
        # W: 2x2, c: 2 (bias pentru hidden)
        self.hidden = nn.Linear(2, 2)
        # w: 2x1, b: 1 (bias pentru output)
        self.output = nn.Linear(2, 1)

    def forward(self, x):
        # h = max{0, W^T x + c}
        h = torch.relu(self.hidden(x))
        # y = w^T h + b
        y = self.output(h)
        return y

# Solutia exacta pentru XOR:
model = XORNet()
with torch.no_grad():
    model.hidden.weight = nn.Parameter(torch.tensor([[1., 1.], [1., 1.]]))
    model.hidden.bias = nn.Parameter(torch.tensor([0., -1.]))
    model.output.weight = nn.Parameter(torch.tensor([[1., -2.]]))
    model.output.bias = nn.Parameter(torch.tensor([0.]))

# Test
X = torch.tensor([[0., 0.], [0., 1.], [1., 0.], [1., 1.]])
print(model(X).round())  # tensor([[0.], [1.], [1.], [0.]])
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="interactive-paragraph">
            <div class="paragraph-main" onclick="toggleParagraph(this)">
                <h4>Parametrii Solutiei XOR</h4>
                <p>Putem specifica o solutie la problema XOR cu urmatoarele valori: W = [[1,1],[1,1]], c = [0,-1], w = [1,-2], si b = 0. Acesti parametri au fost alesi manual pentru a demonstra cum functioneaza reteaua. In practica, gradient descent ar gasi parametri echivalenti (posibil diferiti numeric dar cu aceeasi functionalitate).</p>
            </div>
            <div class="expandable-sections">
                <div class="section-tab">
                    <div class="section-header" onclick="toggleSection(this)">
                        <div class="section-icon animation">‚ú®</div>
                        <span>Vizualizare: Fluxul Datelor</span>
                        <span class="arrow">‚ñ∂</span>
                    </div>
                    <div class="section-content">
                        <div class="section-body">
                            <div style="background: var(--bg-lighter); padding: 20px; border-radius: 12px;">
                                <div class="formula" style="text-align: center; margin-bottom: 20px;">
                                    W = [1 1; 1 1], c = [0, -1], w = [1, -2], b = 0
                                </div>
                                <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                                    <tr style="background: var(--primary);">
                                        <th style="padding: 10px;">x</th>
                                        <th style="padding: 10px;">Wx + c</th>
                                        <th style="padding: 10px;">h = ReLU</th>
                                        <th style="padding: 10px;">w·µÄh + b</th>
                                        <th style="padding: 10px;">Target</th>
                                    </tr>
                                    <tr style="background: var(--bg-dark);">
                                        <td style="padding: 10px; text-align: center;">[0,0]</td>
                                        <td style="padding: 10px; text-align: center;">[0,-1]</td>
                                        <td style="padding: 10px; text-align: center;">[0,0]</td>
                                        <td style="padding: 10px; text-align: center; color: var(--success);">0</td>
                                        <td style="padding: 10px; text-align: center;">0</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 10px; text-align: center;">[0,1]</td>
                                        <td style="padding: 10px; text-align: center;">[1,0]</td>
                                        <td style="padding: 10px; text-align: center;">[1,0]</td>
                                        <td style="padding: 10px; text-align: center; color: var(--success);">1</td>
                                        <td style="padding: 10px; text-align: center;">1</td>
                                    </tr>
                                    <tr style="background: var(--bg-dark);">
                                        <td style="padding: 10px; text-align: center;">[1,0]</td>
                                        <td style="padding: 10px; text-align: center;">[1,0]</td>
                                        <td style="padding: 10px; text-align: center;">[1,0]</td>
                                        <td style="padding: 10px; text-align: center; color: var(--success);">1</td>
                                        <td style="padding: 10px; text-align: center;">1</td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 10px; text-align: center;">[1,1]</td>
                                        <td style="padding: 10px; text-align: center;">[2,1]</td>
                                        <td style="padding: 10px; text-align: center;">[2,1]</td>
                                        <td style="padding: 10px; text-align: center; color: var(--success);">0</td>
                                        <td style="padding: 10px; text-align: center;">0</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>
