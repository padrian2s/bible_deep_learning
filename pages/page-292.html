<section class="page-section" id="page-292">
    <div class="page-header">
        <div class="page-number">292</div>
        <div class="page-title">
            <h3>8.1.3 Batch si Minibatch Algorithms</h3>
            <span>Algoritmi pe Loturi de Date</span>
        </div>
    </div>
    <div class="image-container">
        <img src="book_page_jpg/page-292.jpg"
             alt="Pagina 292" class="page-image" onclick="zoomImage(this)">
    </div>
    <div class="explanation-content">

        <div class="interactive-paragraph">
            <div class="paragraph-main" onclick="toggleParagraph(this)">
                <h4>Functia Obiectiv ca Suma</h4>
                <p>O proprietate cheie a algoritmilor ML: functia obiectiv se descompune ca o <strong>suma peste exemple de training</strong>. Algoritmii de optimizare calculeaza de obicei fiecare update bazat pe o valoare asteptata a costului, estimata folosind un subset de date.</p>
            </div>
            <div class="expandable-sections">
                <div class="section-tab">
                    <div class="section-header" onclick="toggleSection(this)">
                        <div class="section-icon simulation">ðŸŽ®</div>
                        <span>Formula: Gradient ca Expectatie</span>
                        <span class="arrow">â–¶</span>
                    </div>
                    <div class="section-content">
                        <div class="section-body">
                            <div class="formula" style="font-size: 1.1rem;">
                                âˆ‡<sub>Î¸</sub>J(Î¸) = E<sub>x,y~pÌ‚<sub>data</sub></sub> [âˆ‡<sub>Î¸</sub> log p<sub>model</sub>(x, y; Î¸)]
                            </div>
                            <p style="color: var(--text-secondary); margin-top: 15px;">Gradientul exact necesita evaluarea modelului pe <strong>toate</strong> exemplele din dataset. Pentru milioane de exemple, asta e foarte costisitor!</p>
                            <div style="background: var(--bg-lighter); padding: 15px; border-radius: 8px; margin-top: 15px;">
                                <strong style="color: var(--success);">Solutia:</strong> Estimam expectatia prin sampling - calculam gradientul pe un <strong>minibatch</strong> mic de exemple.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="interactive-paragraph">
            <div class="paragraph-main" onclick="toggleParagraph(this)">
                <h4>Standard Error of the Mean</h4>
                <p>Aminteste-ti ca eroarea standard a mediei estimate din n sample-uri este Ïƒ/âˆšn. Aceasta scade mai lent decat linear! Dublarea sample-urilor nu dubleaza precizia estimarii - o imbunatateste doar cu factor âˆš2 â‰ˆ 1.41.</p>
            </div>
            <div class="expandable-sections">
                <div class="section-tab">
                    <div class="section-header" onclick="toggleSection(this)">
                        <div class="section-icon animation">âœ¨</div>
                        <span>Vizualizare: Diminishing Returns</span>
                        <span class="arrow">â–¶</span>
                    </div>
                    <div class="section-content">
                        <div class="section-body">
                            <div class="formula">
                                SE = Ïƒ / âˆšn
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 15px; text-align: center;">
                                <div style="background: var(--bg-lighter); padding: 10px; border-radius: 8px;">
                                    <div style="color: var(--accent);">n=100</div>
                                    <div style="color: var(--text-secondary); font-size: 0.85rem;">SE = Ïƒ/10</div>
                                </div>
                                <div style="background: var(--bg-lighter); padding: 10px; border-radius: 8px;">
                                    <div style="color: var(--accent);">n=10000</div>
                                    <div style="color: var(--text-secondary); font-size: 0.85rem;">SE = Ïƒ/100</div>
                                </div>
                                <div style="background: var(--bg-lighter); padding: 10px; border-radius: 8px;">
                                    <div style="color: var(--warning);">100x samples</div>
                                    <div style="color: var(--text-secondary); font-size: 0.85rem;">â†’ 10x precizie</div>
                                </div>
                                <div style="background: var(--bg-lighter); padding: 10px; border-radius: 8px;">
                                    <div style="color: var(--success);">Concluzie</div>
                                    <div style="color: var(--text-secondary); font-size: 0.85rem;">Updates frecvente > precise</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="section-tab">
                    <div class="section-header" onclick="toggleSection(this)">
                        <div class="section-icon reference">ðŸ“š</div>
                        <span>Implicatie: Mai multe update-uri mici</span>
                        <span class="arrow">â–¶</span>
                    </div>
                    <div class="section-content">
                        <div class="section-body">
                            <div class="key-concept">
                                <p>Majoritatea algoritmilor de optimizare <strong>converg mult mai rapid</strong> daca li se permit update-uri aproximative frecvente, decat daca asteapta gradiente exacte. Calculul unui gradient exact necesita O(m) operatii pentru m exemple.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="interactive-paragraph">
            <div class="paragraph-main" onclick="toggleParagraph(this)">
                <h4>Redundanta in Training Set</h4>
                <p>O alta motivatie pentru minibatch: redundanta datelor. In cel mai rau caz, toate m sample-urile ar putea fi copii identice! Un gradient bazat pe 1 sample ar fi perfect corect, dar am calculat de m ori mai mult pentru nimic. In practica, multe exemple sunt similare si contribuie similar la gradient.</p>
            </div>
            <div class="expandable-sections">
                <div class="section-tab">
                    <div class="section-header" onclick="toggleSection(this)">
                        <div class="section-icon simulation">ðŸŽ®</div>
                        <span>Exemplu: Cifre 7 similare</span>
                        <span class="arrow">â–¶</span>
                    </div>
                    <div class="section-content">
                        <div class="section-body">
                            <div style="background: var(--bg-lighter); padding: 15px; border-radius: 8px;">
                                <p style="color: var(--text-secondary);">Imagineaza-ti 1000 de imagini cu cifra "7" scrise similar.</p>
                                <p style="color: var(--text-secondary); margin-top: 10px;">Gradientul de la imaginea #1 e foarte similar cu gradientul de la imaginea #2, #3... #1000.</p>
                                <p style="color: var(--success); margin-top: 10px;"><strong>Rezultat:</strong> Putem estima gradientul din 10-100 imagini aproape la fel de bine ca din 1000!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>
